<div
  class="min-h-screen flex items-center justify-center p-4 sm:p-6 relative overflow-hidden bg-gradient-to-br from-gray-50 to-blue-50">
  <!-- Sfondo tematico per prenotazioni aziendali -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">

    <!-- Planimetria astratta di uffici -->
    <div class="absolute inset-0 opacity-15">
      <svg viewBox="0 0 1200 800" class="w-full h-full">
        <!-- Struttura sale riunioni -->
        <rect x="200" y="150" width="300" height="200" rx="15" stroke="#3b82f6" stroke-width="1.5" fill="none"
          stroke-dasharray="8 3" class="animate-dash"></rect>
        <rect x="700" y="300" width="250" height="150" rx="15" stroke="#6366f1" stroke-width="1.5" fill="none"
          stroke-dasharray="8 3" class="animate-dash-reverse"></rect>

        <!-- Tavoli riunioni -->
        <circle cx="350" cy="250" r="40" stroke="#3b82f6" stroke-width="1" fill="none" stroke-dasharray="5 2"></circle>
        <rect x="750" y="350" width="150" height="80" rx="10" stroke="#6366f1" stroke-width="1" fill="none"></rect>

        <!-- Elementi relax -->
        <path d="M900 500 Q950 450 1000 500 T1100 500" stroke="#10b981" stroke-width="1.2" fill="none"
          stroke-dasharray="6 4"></path>
        <circle cx="950" cy="550" r="25" stroke="#10b981" stroke-width="0.8" fill="none"></circle>
      </svg>
    </div>

    <!-- Orologio digitale astratto -->
    <div class="absolute top-1/4 right-1/4 transform translate-x-1/4 -translate-y-1/4">
      <div class="text-4xl font-bold text-blue-400/30 tracking-widest font-mono">11:00</div>
    </div>

    <!-- Calendario fluttuante -->
    <div
      class="absolute bottom-1/3 left-1/4 transform -translate-x-1/4 rotate-6 bg-white/20 backdrop-blur-sm border border-blue-200/30 rounded-lg p-2 w-32 shadow-sm">
      <div class="text-center text-blue-500/70 font-bold">LUG</div>
      <div class="text-center text-3xl text-blue-600/70 font-bold">8</div>
      <div class="text-center text-xs text-blue-400/70">2025</div>
    </div>

    <!-- Icone tematiche animate -->
    <div class="absolute top-1/3 left-1/3 text-blue-400/40 animate-float-slow">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
          d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
      </svg>
    </div>

    <!-- Fasci di luce dinamici -->
    <div class="absolute inset-0">
      <div
        class="absolute top-0 left-1/2 w-1/2 h-1 bg-gradient-to-r from-blue-400/10 to-transparent transform rotate-45 origin-left">
      </div>
      <div
        class="absolute top-1/2 right-0 w-1/2 h-1 bg-gradient-to-l from-indigo-400/10 to-transparent transform -rotate-30 origin-right">
      </div>
    </div>

    <!-- Effetto particelle personalizzato -->
    <div class="absolute inset-0">
      @for (particle of particles(); track $index) {
      <div class="particle absolute rounded-full animate-float" [style]="particle.style"></div>
      }
    </div>
  </div>

  <!-- Il resto del tuo codice rimane invariato -->
  <!-- Login/Register Card -->
  <div
    class="glass-card w-full max-w-md rounded-2xl border border-gray-200/70 backdrop-blur-xl shadow-xl bg-white/80 transform transition-all duration-500 hover:shadow-2xl hover:shadow-blue-400/20">
    <!-- Header -->
    <div class="bg-gradient-to-r from-blue-500 to-indigo-600 p-6 relative overflow-hidden rounded-t-2xl group">
      <div
        class="absolute inset-0 bg-gradient-to-r from-white/30 to-white/0 opacity-40 group-hover:opacity-50 transition-opacity duration-300">
      </div>
      <div class="flex justify-between items-center z-10 relative">
        <h1
          class="text-2xl sm:text-3xl font-bold text-white transform transition-transform duration-300 group-hover:translate-x-1">
          {{ isRegisterMode() ? 'Registrazione' : 'Accesso' }}
        </h1>
        <button type="button" (click)="toggleMode()"
          class="text-white/90 hover:text-white text-sm font-medium transition-all duration-300 flex items-center">
          {{ isRegisterMode() ? 'Hai già un account?' : 'Crea un account' }}
          <mat-icon class="ml-1 text-base">{{ isRegisterMode() ? 'login' : 'person_add' }}</mat-icon>
        </button>
      </div>
    </div>

    <!-- Form -->
    <div class="p-6 space-y-6">
      <form (ngSubmit)="isRegisterMode() ? register() : login()" class="space-y-4">
        <!-- Email Field -->
        <div class="form-control">
          <label class="label">
            <span class="label-text text-gray-700 font-medium">Email</span>
          </label>
          <div class="relative">
            <input type="email" [ngModel]="email()" (ngModelChange)="email.set($event)" name="email"
              placeholder="tua@email.com"
              class="input input-bordered w-full bg-white/95 border-gray-300 text-gray-800 pl-10 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300"
              required autocomplete="username" [class.border-red-400]="showEmailError()"
              [class.animate-shake]="showEmailError()">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-blue-500">
              <mat-icon class="text-lg">alternate_email</mat-icon>
            </span>
          </div>
          @if (showEmailError()) {
          <div class="flex items-start mt-1 text-sm text-red-500 animate-fade-in">
            <mat-icon class="text-sm mr-1">error_outline</mat-icon>
            <span>Inserire un indirizzo email valido</span>
          </div>
          }
        </div>

        <!-- Password Field -->
        <div class="form-control">
          <label class="label">
            <span class="label-text text-gray-700 font-medium">Password</span>
          </label>
          <div class="relative">
            <input type="password" [ngModel]="password()" (ngModelChange)="password.set($event)" name="password"
              placeholder="••••••••"
              class="input input-bordered w-full bg-white/95 border-gray-300 text-gray-800 pl-10 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300"
              required minlength="6" autocomplete="current-password" [class.border-red-400]="showPasswordError()"
              [class.animate-shake]="showPasswordError()">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-blue-500">
              <mat-icon class="text-lg">lock</mat-icon>
            </span>
          </div>
          @if (showPasswordError()) {
          <div class="flex items-start mt-1 text-sm text-red-500 animate-fade-in">
            <mat-icon class="text-sm mr-1">error_outline</mat-icon>
            <span>La password deve contenere almeno 6 caratteri</span>
          </div>
          }
        </div>

        <!-- Registration Fields -->
        @if (isRegisterMode()) {
        <div class="space-y-4 animate-fade-in">
          <!-- First Name -->
          <div class="form-control">
            <label class="label">
              <span class="label-text text-gray-700 font-medium">Nome</span>
            </label>
            <div class="relative">
              <input type="text" [ngModel]="firstName()" (ngModelChange)="firstName.set($event)" name="firstName"
                placeholder="Mario"
                class="input input-bordered w-full bg-white/95 border-gray-300 text-gray-800 pl-10 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300"
                required autocomplete="given-name">
              <span class="absolute left-3 top-1/2 -translate-y-1/2 text-blue-500">
                <mat-icon class="text-lg">badge</mat-icon>
              </span>
            </div>
          </div>

          <!-- Last Name -->
          <div class="form-control">
            <label class="label">
              <span class="label-text text-gray-700 font-medium">Cognome</span>
            </label>
            <div class="relative">
              <input type="text" [ngModel]="lastName()" (ngModelChange)="lastName.set($event)" name="lastName"
                placeholder="Rossi"
                class="input input-bordered w-full bg-white/95 border-gray-300 text-gray-800 pl-10 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300"
                required autocomplete="family-name">
              <span class="absolute left-3 top-1/2 -translate-y-1/2 text-blue-500">
                <mat-icon class="text-lg">assignment_ind</mat-icon>
              </span>
            </div>
          </div>

          <!-- Confirm Password -->
          <div class="form-control">
            <label class="label">
              <span class="label-text text-gray-700 font-medium">Conferma Password</span>
            </label>
            <div class="relative">
              <input type="password" [ngModel]="confirmPassword()" (ngModelChange)="confirmPassword.set($event)"
                name="confirmPassword" placeholder="••••••••"
                class="input input-bordered w-full bg-white/95 border-gray-300 text-gray-800 pl-10 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300"
                required minlength="6" autocomplete="new-password" [class.border-red-400]="showConfirmPasswordError()"
                [class.animate-shake]="showConfirmPasswordError()">
              <span class="absolute left-3 top-1/2 -translate-y-1/2 text-blue-500">
                <mat-icon class="text-lg">lock_reset</mat-icon>
              </span>
            </div>
            @if (showConfirmPasswordError()) {
            <div class="flex items-start mt-1 text-sm text-red-500 animate-fade-in">
              <mat-icon class="text-sm mr-1">error_outline</mat-icon>
              <span>Le password non coincidono</span>
            </div>
            }
          </div>
        </div>
        }

        <!-- Message -->
        @if (message()) {
        <div class="flex items-center p-3 border-l-4 rounded-r animate-fade-in-up" [class.border-red-500]="isError()"
          [class.border-green-500]="!isError()" [class.bg-red-50]="isError()" [class.bg-green-50]="!isError()">
          <mat-icon [class.text-red-500]="isError()" [class.text-green-500]="!isError()">
            {{ isError() ? 'warning' : 'check_circle' }}
          </mat-icon>
          <span [class.text-red-700]="isError()" [class.text-green-700]="!isError()" class="text-sm ml-2">
            {{ message() }}
          </span>
        </div>
        }

        <!-- Submit Button -->
        <div class="pt-2">
          <button type="submit"
            class="w-full py-3 px-4 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-medium rounded-lg transition-all duration-300 transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 flex items-center justify-center"
            [disabled]="!isFormValid() || isLoading()">
            {{ isRegisterMode() ? 'Registrati' : 'Accedi' }}
            @if (isLoading()) {
            <mat-icon class="ml-2 animate-spin">autorenew</mat-icon>
            } @else {
            <mat-icon class="ml-2">arrow_forward</mat-icon>
            }
          </button>
        </div>
      </form>
    </div>

    <!-- Footer -->
    <div class="absolute bottom-0 left-0 w-full h-1 transition-all duration-1000" [class]="isRegisterMode() ?
           'bg-gradient-to-r from-green-400 via-emerald-400 to-teal-400 hover:via-emerald-300 hover:to-teal-300' :
           'bg-gradient-to-r from-blue-400 via-indigo-400 to-purple-400 hover:via-indigo-300 hover:to-purple-300'">
    </div>
  </div>
</div>
